<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>byu-cas.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Byu-cas</span> <span class="project-version">4</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 current"><a href="byu-cas.core.html"><div class="inner"><span>byu-cas.core</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="byu-cas.core.html#var-adds-assertion-to-response"><div class="inner"><span>adds-assertion-to-response</span></div></a></li><li class="depth-1"><a href="byu-cas.core.html#var-artifact-parameter-name"><div class="inner"><span>artifact-parameter-name</span></div></a></li><li class="depth-1"><a href="byu-cas.core.html#var-authentication-filter"><div class="inner"><span>authentication-filter</span></div></a></li><li class="depth-1"><a href="byu-cas.core.html#var-BYU-CAS-server"><div class="inner"><span>BYU-CAS-server</span></div></a></li><li class="depth-1"><a href="byu-cas.core.html#var-BYU-CAS-service"><div class="inner"><span>BYU-CAS-service</span></div></a></li><li class="depth-1"><a href="byu-cas.core.html#var-cas"><div class="inner"><span>cas</span></div></a></li><li class="depth-1"><a href="byu-cas.core.html#var-const-cas-assertion"><div class="inner"><span>const-cas-assertion</span></div></a></li><li class="depth-1"><a href="byu-cas.core.html#var-construct-url"><div class="inner"><span>construct-url</span></div></a></li><li class="depth-1"><a href="byu-cas.core.html#var-dependency-filter"><div class="inner"><span>dependency-filter</span></div></a></li><li class="depth-1"><a href="byu-cas.core.html#var-dependency-string"><div class="inner"><span>dependency-string</span></div></a></li><li class="depth-1"><a href="byu-cas.core.html#var-extract-url"><div class="inner"><span>extract-url</span></div></a></li><li class="depth-1"><a href="byu-cas.core.html#var-is-logged-in.3F"><div class="inner"><span>is-logged-in?</span></div></a></li><li class="depth-1"><a href="byu-cas.core.html#var-logout-filter"><div class="inner"><span>logout-filter</span></div></a></li><li class="depth-1"><a href="byu-cas.core.html#var-logout-resp"><div class="inner"><span>logout-resp</span></div></a></li><li class="depth-1"><a href="byu-cas.core.html#var-pprints-mw"><div class="inner"><span>pprints-mw</span></div></a></li><li class="depth-1"><a href="byu-cas.core.html#var-set-timeout"><div class="inner"><span>set-timeout</span></div></a></li><li class="depth-1"><a href="byu-cas.core.html#var-ticket"><div class="inner"><span>ticket</span></div></a></li><li class="depth-1"><a href="byu-cas.core.html#var-ticket-validation-filter"><div class="inner"><span>ticket-validation-filter</span></div></a></li><li class="depth-1"><a href="byu-cas.core.html#var-user-principal-filter"><div class="inner"><span>user-principal-filter</span></div></a></li><li class="depth-1"><a href="byu-cas.core.html#var-Validator"><div class="inner"><span>Validator</span></div></a></li><li class="depth-2"><a href="byu-cas.core.html#var-validate"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>validate</span></div></a></li><li class="depth-1"><a href="byu-cas.core.html#var-validator-maker"><div class="inner"><span>validator-maker</span></div></a></li><li class="depth-1"><a href="byu-cas.core.html#var-wrap-cas"><div class="inner"><span>wrap-cas</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">byu-cas.core</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-adds-assertion-to-response"><h3>adds-assertion-to-response</h3><div class="usage"><code>(adds-assertion-to-response resp assertion)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-artifact-parameter-name"><h3>artifact-parameter-name</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-authentication-filter"><h3>authentication-filter</h3><div class="usage"><code>(authentication-filter handler no-redirect?)</code><code>(authentication-filter handler no-redirect? cas-server)</code></div><div class="doc"><pre class="plaintext">Checks that the request is carrying CAS credentials (but does not validate them)
</pre></div></div><div class="public anchor" id="var-BYU-CAS-server"><h3>BYU-CAS-server</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-BYU-CAS-service"><h3>BYU-CAS-service</h3><div class="usage"><code>(BYU-CAS-service s)</code></div><div class="doc"><pre class="plaintext">Returns a function that returns s because functions are required
</pre></div></div><div class="public anchor" id="var-cas"><h3>cas</h3><div class="usage"><code>(cas handler)</code><code>(cas handler options)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-const-cas-assertion"><h3>const-cas-assertion</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-construct-url"><h3>construct-url</h3><div class="usage"><code>(construct-url uri query-params)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-dependency-filter"><h3>dependency-filter</h3><div class="usage"><code>(dependency-filter handler)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-dependency-string"><h3>dependency-string</h3><div class="usage"><code>(dependency-string wrapped)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-extract-url"><h3>extract-url</h3><div class="usage"><code>(extract-url request)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-is-logged-in.3F"><h3>is-logged-in?</h3><div class="usage"><code>(is-logged-in? req)</code></div><div class="doc"><pre class="plaintext">Takes a request and determines whether the requesting user is logged in or not.
</pre></div></div><div class="public anchor" id="var-logout-filter"><h3>logout-filter</h3><div class="usage"><code>(logout-filter handler)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-logout-resp"><h3>logout-resp</h3><div class="usage"><code>(logout-resp)</code><code>(logout-resp redirect-url)</code></div><div class="doc"><pre class="plaintext">Produces a response map that logs user out of the application (by ending the session) and CAS (by redirecting to the CAS logout endpoint).  Optionally takes a redirect URL which CAS uses to redirect the user (again!) after logout.  Redirect URL should be the *full* URL, including "https:"
</pre></div></div><div class="public anchor" id="var-pprints-mw"><h3>pprints-mw</h3><div class="usage"><code>(pprints-mw handler)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-set-timeout"><h3>set-timeout</h3><div class="usage"><code>(set-timeout duration resp)</code></div><div class="doc"><pre class="plaintext">Takes a number of minutes and a response.  Sets a time in :session, after which user will be logged out.
</pre></div></div><div class="public anchor" id="var-ticket"><h3>ticket</h3><div class="usage"><code>(ticket r)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-ticket-validation-filter"><h3>ticket-validation-filter</h3><div class="usage"><code>(ticket-validation-filter handler success-hook)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-user-principal-filter"><h3>user-principal-filter</h3><div class="usage"><code>(user-principal-filter handler)</code></div><div class="doc"><pre class="plaintext">Takes username and cas-info from request, and moves them into :username and :cas-info keys in the top level of the request map (rather than being buried in :query-params or :session).
</pre></div></div><div class="public anchor" id="var-Validator"><h3>Validator</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-validate"><h3>validate</h3><div class="usage"><code>(validate v ticket service)</code></div><div class="doc"><pre class="plaintext"></pre></div></div></div></div></div><div class="public anchor" id="var-validator-maker"><h3>validator-maker</h3><div class="usage"><code>(validator-maker)</code><code>(validator-maker server)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-wrap-cas"><h3>wrap-cas</h3><div class="usage"><code>(wrap-cas &amp; args)</code></div><div class="doc"><pre class="plaintext">Middleware that requires the user to authenticate with a CAS server.
Is dependent on wrap-params and wrap-session; the general call will look something like

(-&gt; handler
    (wrap-cas :timeout 120)
    (wrap-session)
    (wrap-params))


The users's username is added to the request map under the :username key.

Accepts the following options:

  :enabled      - when false, the middleware does nothing
  :no-redirect? - if this predicate function returns true for a request, a
                  403 Forbidden response will be returned instead of a 302
                  Found redirect
  :server 	  - the target cas server
  :timeout      - takes a number representing the  length (in minutes) of the timeout period.  BYU recommends 120 (two hours), see README
</pre></div></div></div></body></html>